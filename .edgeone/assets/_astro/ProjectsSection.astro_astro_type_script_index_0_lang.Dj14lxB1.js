(function(){const r=document.getElementById("projects-carousel-ul"),m=r?.parentElement,P=r?.querySelectorAll(".ticker-item"),H=r?.querySelectorAll(".coverflow-item");if(!r||!m||!P||!H){console.error("Projects carousel elements not found");return}JSON.parse(document.getElementById("projects-data")?.textContent||"[]");const g=document.getElementById("project-description-track"),$=document.querySelector(".project-description-viewport");let V=0,j=!1,I=0;function K(){if(!g||!$)return;const t=g.querySelectorAll(".project-content-item");if(t.length===0)return;const e=t[0];e&&requestAnimationFrame(()=>{I=-e.offsetTop,g.style.transform=`translateY(${I}px)`})}function W(t){if(!g||!$||j||t===V)return;const e=g.querySelectorAll(".project-content-item");if(e.length===0||t<0||t>=e.length)return;const n=e[t];if(!n)return;const s=-n.offsetTop;j=!0;const l=I,u=performance.now(),f=500;function X(rt){const ot=rt-u,S=Math.min(ot/f,1),st=S<.5?4*S*S*S:1-Math.pow(-2*S+2,3)/2;I=l+(s-l)*st,g.style.transform=`translateY(${I}px)`,S<1?requestAnimationFrame(X):(I=s,V=t,j=!1)}requestAnimationFrame(X)}const d=350,w=0,p=P.length,h=p;for(let t=0;t<h;t++){const n=P[t].cloneNode(!0);n.classList.add("clone-item"),n.setAttribute("data-clone-index",t),n.setAttribute("data-original-index",t),n.setAttribute("aria-hidden","true"),r.insertBefore(n,P[0])}for(let t=0;t<h;t++){const n=P[t].cloneNode(!0);n.classList.add("clone-item"),n.setAttribute("data-clone-index",t),n.setAttribute("data-original-index",t),n.setAttribute("aria-hidden","true"),r.appendChild(n)}const M=r.querySelectorAll(".ticker-item"),Q=r.querySelectorAll(".coverflow-item");let i=0,a=!1,v=0,C=0,y=0,c=null,E=0,x=null,T=null,Z=!0;const _=4e3;let F=-1;function z(t,e){if(!m)return 0;const n=m.offsetWidth/2;return t*(d+w)+e+d/2-n}function k(t,e,n){if(t<=e[0])return n[0];if(t>=e[e.length-1])return n[n.length-1];for(let o=0;o<e.length-1;o++)if(t>=e[o]&&t<=e[o+1]){const s=(t-e[o])/(e[o+1]-e[o]);if(typeof n[o]=="string"&&n[o].includes("%")){const l=parseFloat(n[o]),u=parseFloat(n[o+1]);return l+(u-l)*s+"%"}return n[o]+(n[o+1]-n[o])*s}return n[0]}function R(t){const e=k(t,[-200,0,200],[20,0,-20]),n=k(t,[-200,0,200],[.7,1,.7]),o=k(t,[-800,-200,200,800],["100%","0%","0%","-100%"]),s=Math.max(0,Math.round(1e3-Math.abs(t)));return{rotateY:e,scale:n,x:o,zIndex:s}}function B(){M.forEach((t,e)=>{const n=t.querySelector(".coverflow-item");if(!n)return;const o=z(e,i),{rotateY:s,scale:l,x:u,zIndex:f}=R(o);t.style.zIndex=f.toString();const X=u==="0%"?0:parseFloat(u)/100*d;n.style.transform=`perspective(500px) translateX(${X}px) rotateY(${s}deg) scale(${l})`})}function q(t){if(!m)return 0;const e=m.offsetWidth/2,n=t*(d+w);return e-n-d/2}function N(){if(a||c)return;const t=p*(d+w);i>-t/2&&(i-=t,r.style.transition="none",A(),setTimeout(()=>{r.style.transition=""},0));const e=-t*1.5;i<e&&(i+=t,r.style.transition="none",A(),setTimeout(()=>{r.style.transition=""},0))}function b(){if(!m)return p;const t=m.offsetWidth/2;let e=p,n=1/0;return M.forEach((o,s)=>{const u=s*(d+w)+i+d/2,f=Math.abs(u-t);f<n&&(n=f,e=s)}),e}function J(t){return t<h?t:t<h+p?t-h:t-h-p}function tt(){const t=b(),e=J(t);e!==F&&(F=e,W(e))}function D(t){const e=J(t);e!==F&&(F=e,W(e))}function Y(t){D(t);const e=q(t);O(e)}function U(){const e=b()+1;Y(e)}function et(){const e=b()-1;Y(e)}function G(){T||(T=window.setInterval(()=>{!a&&!c&&Z&&U()},_))}function nt(){T&&(clearInterval(T),T=null)}function L(){nt(),setTimeout(()=>{G()},5e3)}function O(t,e=450){const n=i,o=performance.now();function s(l){const u=l-o,f=Math.min(u/e,1),X=1-Math.pow(1-f,3);i=n+(t-n)*X,A(),f<1?c=requestAnimationFrame(s):(c=null,N(),tt())}c&&cancelAnimationFrame(c),c=requestAnimationFrame(s)}function A(){r.style.transform=`translateX(${i}px)`,B(),N()}r.addEventListener("mousedown",t=>{const e=t.target.closest(".ticker-item");e?x=Array.from(M).indexOf(e):x=null,a=!0,v=t.pageX,C=i,y=t.pageX,performance.now(),E=0,r.style.cursor="grabbing",L(),c&&(cancelAnimationFrame(c),c=null)}),r.addEventListener("mousemove",t=>{if(!a)return;t.preventDefault(),performance.now(),t.pageX-y;const e=t.pageX-v;E=Math.abs(e),i=C+e,A(),y=t.pageX}),r.addEventListener("mouseup",()=>{if(a){if(a=!1,r.style.cursor="grab",E<5&&x!==null){const t=z(x,i);t<-50?et():t>50?U():Y(x)}else{const t=b();D(t);const e=q(t);O(e)}E=0,x=null,L()}}),r.addEventListener("mouseleave",()=>{a&&(a=!1,r.style.cursor="grab")}),r.addEventListener("touchstart",t=>{a=!0,v=t.touches[0].pageX,C=i,y=t.touches[0].pageX,performance.now(),L(),c&&(cancelAnimationFrame(c),c=null)}),r.addEventListener("touchmove",t=>{if(!a)return;performance.now(),t.touches[0].pageX-y;const e=t.touches[0].pageX-v;i=C+e,A(),y=t.touches[0].pageX}),r.addEventListener("touchend",()=>{if(a){a=!1;const t=b();D(t);const e=q(t);O(e),L()}}),r.style.cursor="grab",Q.forEach(t=>{t.style.cursor="pointer"}),m&&(i=q(p),A()),B(),K(),V=0,G()})();
